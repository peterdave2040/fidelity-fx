<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deposit | Fidelity FX</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --neon-y: #eaff00;
            --green: #00ff88;
            --red: #ff4e50;
            --blue: #004cff;
            --bg: #030508;
            --card: #0d1117;
        }
        
        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--bg);
            color: #fff;
            padding: 20px;
            padding-bottom: 120px;
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .back-btn {
            color: var(--neon-y);
            text-decoration: none;
            font-family: 'Orbitron';
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .title {
            font-family: 'Orbitron';
            font-size: 28px;
            text-align: center;
            color: var(--neon-y);
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #848e9c;
            margin-bottom: 30px;
        }
        
        .step-container {
            background: var(--card);
            padding: 30px;
            border-radius: 25px;
            border: 2px solid rgba(234,255,0,0.3);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        .step-title {
            font-family: 'Orbitron';
            font-size: 18px;
            color: var(--neon-y);
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }
        
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .crypto-btn {
            background: #000;
            border: 2px solid #333;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: 0.3s;
            text-align: center;
        }
        
        .crypto-btn:hover {
            border-color: var(--neon-y);
            transform: scale(1.05);
        }
        
        .crypto-btn.active {
            border-color: var(--neon-y);
            background: rgba(234,255,0,0.1);
            box-shadow: 0 0 20px rgba(234,255,0,0.3);
        }
        
        .crypto-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .crypto-name {
            font-family: 'Orbitron';
            font-size: 14px;
            font-weight: bold;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-family: 'Orbitron';
            font-size: 12px;
            color: var(--neon-y);
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        input {
            width: 100%;
            padding: 18px;
            background: #000;
            border: 2px solid #333;
            border-radius: 12px;
            color: #fff;
            font-size: 18px;
            font-family: 'Orbitron';
            outline: none;
            transition: 0.3s;
        }
        
        input:focus {
            border-color: var(--neon-y);
            box-shadow: 0 0 15px rgba(234,255,0,0.2);
        }
        
        .btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--neon-y), #fff);
            color: #000;
            border: none;
            border-radius: 12px;
            font-family: 'Orbitron';
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
        }
        
        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 25px rgba(234,255,0,0.4);
        }
        
        .qr-section {
            text-align: center;
            padding: 20px;
            background: #000;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        #qrcode {
            background: #fff;
            padding: 15px;
            border-radius: 12px;
            display: inline-block;
            margin: 20px 0;
        }
        
        .address-box {
            background: #000;
            padding: 15px;
            border: 2px dashed #555;
            border-radius: 10px;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--green);
            margin: 15px 0;
        }
        
        .copy-btn {
            background: var(--green);
            color: #000;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Orbitron';
            font-weight: bold;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .copy-btn:hover {
            background: #00ff99;
        }
        
        .warning-box {
            background: rgba(255,78,80,0.1);
            border: 1px solid var(--red);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
        }
        
        .warning-box strong {
            color: var(--red);
        }
        
        .proof-upload {
            margin: 20px 0;
        }
        
        .upload-label {
            display: block;
            background: rgba(0,76,255,0.2);
            border: 2px dashed var(--blue);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .upload-label:hover {
            background: rgba(0,76,255,0.3);
            border-color: var(--neon-y);
        }
        
        .upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 30px;
            border-radius: 12px;
            font-family: 'Orbitron';
            font-size: 14px;
            font-weight: bold;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        
        .toast.success { background: var(--green); color: #000; }
        .toast.error { background: var(--red); color: #fff; }
        
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .crypto-grid { grid-template-columns: repeat(3, 1fr); }
            .title { font-size: 24px; }
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="dashboard.html" class="back-btn">‚Üê Back to Dashboard</a>
    </div>
    
    <h1 class="title">üí∞ Make Deposit</h1>
    <p class="subtitle">Fund your account to start earning</p>
    
    <!-- Step 1: Select Crypto & Amount -->
    <div class="step-container" id="step1">
        <div class="step-title">STEP 1: SELECT CRYPTOCURRENCY</div>
        
        <div class="crypto-grid">
            <div class="crypto-btn active" onclick="selectCrypto('BTC', '‚Çø', 'bc1qdvvqje23w6slrvrun6ylhr2eduaytlswus9yzn', this)">
                <div class="crypto-icon">‚Çø</div>
                <div class="crypto-name">Bitcoin</div>
            </div>
            
            <div class="crypto-btn" onclick="selectCrypto('ETH', 'Œû', '0xA9Cd12A35269Cba4C3923569903474d6D0E31380', this)">
                <div class="crypto-icon">Œû</div>
                <div class="crypto-name">Ethereum</div>
            </div>
            
            <div class="crypto-btn" onclick="selectCrypto('SOL', '‚óé', '8itFa1it9yf4251pFjab9wEfagz2YSPM6GaDpFx1vMBA', this)">
                <div class="crypto-icon">‚óé</div>
                <div class="crypto-name">Solana</div>
            </div>
            
            <div class="crypto-btn" onclick="selectCrypto('LTC', '≈Å', 'LQ2i81jT6QNWB9pQnthWGuetMK3GDnQNrM', this)">
                <div class="crypto-icon">≈Å</div>
                <div class="crypto-name">Litecoin</div>
            </div>
            
            <div class="crypto-btn" onclick="selectCrypto('XRP', '‚úï', 'rsomaUERGHvTGHvW4umeJQXVRshgkXqY9u', this)">
                <div class="crypto-icon">‚úï</div>
                <div class="crypto-name">Ripple</div>
            </div>
        </div>
        
        <div class="form-group">
            <label>Deposit Amount (USD) *</label>
            <input type="number" id="amount" placeholder="Minimum $100" min="100" value="100">
        </div>
        
        <button class="btn" onclick="generatePayment()">Generate Payment Gateway ‚Üí</button>
    </div>
    
    <!-- Step 2: Payment Details -->
    <div class="step-container" id="step2" style="display:none;">
        <div class="step-title">STEP 2: SEND PAYMENT</div>
        
        <div class="qr-section">
            <p style="margin-bottom: 15px;">Scan QR Code or Copy Address</p>
            <div id="qrcode"></div>
            
            <div style="margin-top: 20px;">
                <strong id="selectedCrypto" style="font-family:'Orbitron'; color:var(--neon-y); font-size:18px;"></strong>
                <div class="address-box" id="addressBox"></div>
                <button class="copy-btn" onclick="copyAddress()">üìã Copy Address</button>
            </div>
        </div>
        
        <div class="warning-box">
            <strong>‚ö†Ô∏è Important:</strong> Only send <span id="warningCrypto"></span> to this address. Sending other coins will result in permanent loss!
        </div>
        
        <div class="proof-upload">
            <label for="proofFile" class="upload-label">
                <div class="upload-icon">üì∏</div>
                <div style="font-family:'Orbitron'; color:var(--neon-y); margin-bottom:5px;">UPLOAD PAYMENT PROOF</div>
                <div style="font-size:12px; color:#848e9c;">Click to attach screenshot or receipt</div>
            </label>
            <input type="file" id="proofFile" accept="image/*">
            <div id="fileName" style="text-align:center; margin-top:10px; color:var(--green); font-size:12px;"></div>
        </div>
        
        <button class="btn" onclick="submitDeposit()">‚úì Submit Deposit Request</button>
    </div>
    
    <script>
        let selectedCrypto = 'BTC';
        let selectedAddress = 'bc1qdvvqje23w6slrvrun6ylhr2eduaytlswus9yzn';
        let selectedIcon = '‚Çø';
        let qrcodeInstance = null;
        
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        function selectCrypto(crypto, icon, address, element) {
            selectedCrypto = crypto;
            selectedAddress = address;
            selectedIcon = icon;
            
            document.querySelectorAll('.crypto-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
        }
        
        function generatePayment() {
            const amount = document.getElementById('amount').value;
            
            if (!amount || amount < 100) {
                showToast('Minimum deposit is $100', 'error');
                return;
            }
            
            // Clear previous QR code
            document.getElementById('qrcode').innerHTML = '';
            
            // Generate new QR Code using QRCode.js library
            qrcodeInstance = new QRCode(document.getElementById('qrcode'), {
                text: selectedAddress,
                width: 200,
                height: 200,
                colorDark: '#000000',
                colorLight: '#ffffff',
                correctLevel: QRCode.CorrectLevel.H
            });
            
            // Update display
            document.getElementById('selectedCrypto').textContent = `${selectedIcon} ${selectedCrypto} Address`;
            document.getElementById('addressBox').textContent = selectedAddress;
            document.getElementById('warningCrypto').textContent = selectedCrypto;
            
            // Show step 2
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function copyAddress() {
            navigator.clipboard.writeText(selectedAddress).then(() => {
                showToast('Address copied to clipboard!', 'success');
            });
        }
        
        // File upload preview
        document.getElementById('proofFile').addEventListener('change', function(e) {
            const fileName = e.target.files[0]?.name;
            if (fileName) {
                document.getElementById('fileName').textContent = `‚úì ${fileName}`;
            }
        });
        
        function submitDeposit() {
            const amount = document.getElementById('amount').value;
            const proofFile = document.getElementById('proofFile').files[0];
            
            if (!proofFile) {
                showToast('Please upload payment proof', 'error');
                return;
            }
            
            // Get current user
            const currentUser = JSON.parse(localStorage.getItem('fidelity_current_user'));
            if (!currentUser) {
                showToast('Please login first', 'error');
                window.location.href = 'login.html';
                return;
            }
            
            // Add to history
            if (!currentUser.history) currentUser.history = [];
            currentUser.history.unshift({
                type: `DEPOSIT (${selectedCrypto})`,
                amount: amount,
                date: new Date().toLocaleDateString(),
                status: 'Pending'
            });
            
            // Update user data
            const users = JSON.parse(localStorage.getItem('fidelity_users') || '[]');
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('fidelity_users', JSON.stringify(users));
                localStorage.setItem('fidelity_current_user', JSON.stringify(currentUser));
            }
            
            showToast('Deposit submitted! Awaiting confirmation', 'success');
            
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 2000);
        }
    </script>
</body>
</html>